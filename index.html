<!DOCTYPE html>
<html>
<head>
	<meta name="description" content="Bluetooth controlled arduino wrench mask">
  <meta name="keywords" content="watch dogs 2">
  <meta name="author" content="TomMakesThings">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Website icon -->
	<link rel="shortcut icon" type="image/x-icon" href="Assets/Icon/favicon.ico">

	<!-- Tab name -->
	<title>Wrench Mask Tutorial</title>

	<!-- Links to the CSS stylesheets -->
	<link rel="stylesheet" href="Stylesheets\main.css">
	<link rel="stylesheet" href="Stylesheets\navbar.css">
	<link rel="stylesheet" href="Stylesheets\about.css">
	<link rel="stylesheet" href="Stylesheets\parts.css">
	<link rel="stylesheet" href="Stylesheets\steps.css">
	<link rel="stylesheet" href="Stylesheets\footer.css">
</head>

<body>

<div class="header">
	<div id="header-left" onmouseover="profileHover(this);" onmouseout="profileUnhover(this);">
		<a href="https://github.com/TomMakesThings"><img src="Assets/Images/Profile.png" alt="GitHub profile picture" id="profilepic"></a>
		<a href="https://tommakesthings.github.io/" id="username" class="navtext">TomMakesThings</a>
	</div>
	<div id="header-center">
		<a href="https://github.com/TomMakesThings/Arduino-Wrench-Mask" class="navtext">Bluetooth Controlled Wrench Mask Tutorial<span class="type-dash" style="visibility: hidden;">_</span></a>
	</div>
	<div class="header-right">
		<a href="#about" class="navtext">About</a>
		<a href="#parts" class="navtext">Parts</a>
		<div class="nav-dropdown">
			<a href="#steps" class="navtext">Steps</a>
			<div class="nav-dropdown-content">
				<p><a class="nav-dropdown-anchor" href="#steps">1. Mask Preparation</a></p>
				<p><a class="nav-dropdown-anchor" href="#step2">2. LED Wiring</a></p>
				<p><a class="nav-dropdown-anchor" href="#step3">3. Arduino Code</a></p>
				<p><a class="nav-dropdown-anchor" href="#step4">4. Android App</a></p>
				<p><a class="nav-dropdown-anchor" href="#step5">5. Attaching Electronics</a></p>
			</div>
		</div>
		<a href="#results" class="navtext">Results</a>
	</div>
</div>

<div class="content">
	<div>
		<a name="about" class="anchor"></a>
  	<h1>About</h1>
		<p>Wrench is one of the main characters from the game Watch Dogs 2 and I thought it would be a fun project to create a real version of his light up mask.
		</p>
		<p class="center-image"><img src="Assets/Images/Wrench-Game.gif"></p>
		<p>Although there are already some great tutorials out there, there's always room for improvement and so I built and coded my own mask using previous work for inspiration.
			The build took a year, but it turned out really well and so here I am documenting the results in a tutorial of my own!
		</p>
		<p>
			This version:
		</p>
		<ul>
			<li>Is controlled wirelessly over bluetooth by a custom built Dedsec themed Android application</li>
			<li>Has 48 different set expressions with blinking and transition animations</li>
			<li>Also allows you to draw custom expressions, display messages and adjust speed and brightness</li>
			<li>Is portable and runs on a single, easily replaceable 9V battery</li>
			<li>Looks more like the in-game character than most other tutorials</li>
		</ul>

		<div class="video-container">
			<button class="circle-button wide-screen-button previous-button" style="float: left;" onclick="aboutVideoChanger(this)"><p><</p></button>
			<video controls id="about-video">
		  	<source src="Assets/Videos/App-Connection.mov" type="video/mp4">
				Error! Could not play video as it is not supported by your browser.
			</video>
			<button class="circle-button wide-screen-button next-button" style="float: right;" onclick="aboutVideoChanger(this)"><p>></p></button>
		</div>
		<div class="video-buttons-small-screen">
			<button class="circle-button small-screen-button next-button" onclick="aboutVideoChanger(this)"><p><</p></button>
			<button class="circle-button small-screen-button previous-button" onclick="aboutVideoChanger(this)"><p>></p></button>
		</div>

	</div>

	<br>

	<div>
		<a name="parts" class="anchor"></a>
		<h1>Parts</h1>
		<details open="open">
			<summary class="header2">Software</summary>
			<div class="software-div">
				<p><a href="https://www.arduino.cc/en/software" target="_blank" rel="noopener noreferrer" class="software-text arduino"><img src="Assets/Images/Arduino-Logo.png" class="software-logo">Arduino IDE</a></p>
				<div style="clear: both; line-height:3px;">
		    	<br>
				</div>
				<ul>
					<li>Required to upload code to the Arduino</li>
					<li>For the tutorial I used version 1.8.15</li>
				</ul>
			</div>

			<div class="software-div">
				<p><a href="https://developer.android.com/studio" target="_blank" rel="noopener noreferrer" class="software-text android"><img src="Assets/Images/Android-Studio-Logo.png" class="software-logo">Android Studio</a></p>
				<div style="clear: both; line-height:3px;">
		    	<br>
				</div>
				<ul>
					<li>Only needed if you wish to edit the Android app</li>
					<li>The app was developed in Android Studio 3.5.1</li>
				</ul>
			</div>
			<div style="clear: both; line-height:10px;"></div>
		</details>

		<br>

		<details open="open">
			<summary class="header2">Code</summary>
			<div class="software-div">
				<p><a href="https://github.com/TomMakesThings/Bluetooth-Wrench-Mask/archive/refs/heads/main.zip" target="_blank" rel="noopener noreferrer" class="software-text arduino2"><img src="Assets/Images/Arduino-Uno-Art.png" class="software-logo">Arduino code</a></p>
				<div style="clear: both; line-height:3px;">
					<br>
				</div>
				<ul>
					<li>Upload the code found in folder 'Arduino' to the board</li>
				</ul>
			</div>

			<div class="software-div">
				<p><a href="https://github.com/TomMakesThings/Bluetooth-Wrench-Mask/raw/main/Android_App/bluetooth-controller-app.apk" target="_blank" rel="noopener noreferrer" class="software-text android2"><img src="Assets/Images/Android-Art.png" class="software-logo">Android phone app</a></p>
				<div style="clear: both; line-height:3px;">
					<br>
				</div>
				<ul>
					<li>Download this app on an Android device to control the LEDs</li>
				</ul>
			</div>
		</details>

		<br>

		<details open="open">
			<summary class="header2">Supplies</summary>
			<div class="row">
				<div class="column">
				<div>
					<a><img src="Assets/Images/Plastic-Mask.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Plastic Wrench mask</p>
						<ul class="part-list">
							<li>If you're in the UK, try searching "watch dogs mask" on Amazon</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Black-Spray-Paint.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Black spray paint</p>
						<ul class="part-list">
							<li>I used PlastiKote super gloss black spray paint</li>
							<li>You can use other paints but make sure you get one suitable for plastic</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Silver-Paint.png" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Metallic silver paint</p>
						<ul class="part-list">
							<li>I used Rust-Oleum metallic silver furniture paint as I had some spare</li>
							<li>Normal acryclic paint works too</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Paintbrush.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Fine paintbrushes</p>
						<ul class="part-list">
							<li>The things normal people use for painting</li>
						</ul>
					</div>
				</div>
			</div>
				<div class="column">
				<div>
					<a><img src="Assets/Images/Android-Phone.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Android device</p>
						<ul class="part-list">
							<li>Can be either a phone or tablet</li>
							<li>Unfortunately the app is not compatible with iOS devices (blame Apple)</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Arduino-Uno.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Arduino UNO</p>
						<ul class="part-list">
							<li>Doesn't matter if it's genuiune or an unofficial clone board</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/USB-Cable.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">USB A to USB B cable</p>
						<ul class="part-list">
							<li>These cables are generic</li>
							<li>Often they'll send you one with the board</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/LED-Matrix.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">x2 white 8x8 LED matrix with MAX7219 module</p>
						<ul class="part-list">
							<li>Note that the LED matrix is detachable from the module and is easy to swap</li>
							<li>For me it was cheaper to buy modules with red LEDs and buy two white LED matrices separately</li>
						</ul>
					</div>
				</div>
			</div>
				<div class="column">
				<div>
					<a><img src="Assets/Images/Bluetooth-Module.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">HC-06 wireless bluetooth module</p>
						<ul class="part-list">
							<li>HC-05 modules work too as they're basically the same but with more functionality</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Jumper-Wires.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">x14 male to female jumper wire</p>
						<ul class="part-list">
							<li>Ideally you want at least 5 to be black as the ones between the eyes are slightly visible</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/9V-Battery-Holder.png" class="part"></a>
					<div class="part-desc">
						<p class="part-name">9V battery holder with an on/off switch</p>
						<ul class="part-list">
							<li>Get one with a connector lead that can fit into the Arduino's barrel jack</li>
							<li>It must have an on/off switch to control power to the Arduino</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/9V-Battery.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">9V battery</p>
						<ul class="part-list">
							<li>The battery will last a long time, but I recommend buying some spares just in case</li>
							<li>I tested AA batteries too, but 8 are required to provide a high enough voltage to power the LEDs which takes up a lot more space</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Arduino-Case.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Arduino UNO plastic case</p>
						<ul class="part-list">
							<li>The colour doesn't matter since it'll be inside the mask</li>
						</ul>
					</div>
				</div>
			</div>
				<div class="column">
				<div>
					<a><img src="Assets/Images/Black-Elastic.png" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Black elastic strap</p>
						<ul class="part-list">
							<li>Make sure its long enough to fit round the back of your head</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Velcro.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Velcro strip</p>
						<ul class="part-list">
							<li>This needs to be about the size of the battery pack</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Black-Tape.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Black electric tape</p>
						<ul class="part-list">
							<li>Use a tape designed insulate electrical wires</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Liquid-Nails.jpg" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Liquid nails</p>
						<ul class="part-list">
							<li>This stuff is pretty strong and will keep the parts in place inside the mask</li>
							<li>Can be purchased in black</li>
						</ul>
					</div>
				</div>
				<div>
					<a><img src="Assets/Images/Black-Paint.png" class="part"></a>
					<div class="part-desc">
						<p class="part-name">Black paint</p>
						<ul class="part-list">
							<li>I used this to paint the white liquid nails</li>
						</ul>
					</div>
				</div>
			</div>
			</div>
		</details>


	</div>

	<br>

	<div>
		<a name="steps" class="anchor"></a>
		<h1>Steps</h1>
		<details open="open">
			<summary class="header2">Step 1 - Mask Preparation</summary>
			<p>The mask I used is a cheap "Watch Dogs" mask that you can find on Amazon or eBay.
				These are a pretty good immitation of the in-game one... but being cheap they're not perfect.
				If you're mask arrives misshapen, then its easy to bend the plastic by dunking it into a bowl of boiling water.
			</p>
			<p>The paint job for the mask was awful so to fix this I spray painted the whole thing black, painted the spikes and bit at the top silver and added a clear gloss coating.
		 		To reduce the chance of the paint chipping, make sure you're using paint suitable for plastic.
			</p>
			<p class="center-image"><img src="Assets/Images/Masks-Painted.jpeg"></p>
		</details>
	</div>

	<br>

	<div>
		<a name="step2" class="anchor"></a>
		<details open="open">
			<summary class="header2">Step 2 - LED Wiring</summary>
			<p>The first step to setting up the Arduino is to wire the LED matricies.
				The wire colours don't have to match, though I recommend using black wires between the matrices as they may be visible between the eyes.
			</p>
			<p>For now don't add the bluetooth module.
				 Maybe it was just my board but I discovered it caused a weird issue preventing me from uploading code to the board for the first time if this was connected.
			</p>
			<p class="wiring"><img src="Assets/Images/Arduino-LED-Wiring.png" style="max-width: 900px; padding: 25px;"></p>
		</details>

		<br>

		<a name="step3" class="anchor"></a>
		<details open="open">
			<summary class="header2">Step 3 - Uploading Arduino Code</summary>
			<p>Code can be uploaded to the board using Arduino IDE.
				If you do not have this already, <a href="https://www.arduino.cc/en/software" target="_blank" rel="noopener noreferrer">download the latest version</a> from the official Arduino site.
				To download all required code in zip format, click the file below.
				You can also find these files on <a href="https://github.com/TomMakesThings/Bluetooth-Wrench-Mask" target="_blank" rel="noopener noreferrer">GitHub</a>.
			</p>

			<a href="https://github.com/TomMakesThings/Bluetooth-Wrench-Mask/archive/refs/heads/main.zip" target="_blank" rel="noopener noreferrer" download>
				<img src="Assets/Images/Code-File.png" class="code-download">
			</a>

			<p>Extract the contents of the zip, locate the file under Bluetooth-Wrench-Mask-main ➔ Arduino ➔ BluetoothEyes.ino and click it to open the sketch in Arduino IDE.
				If this is your first time using the IDE, make sure to set the board type by going to Tools ➔ Board and selecting "Arduino Uno".</p>
			<p class="code-image"><img src="Assets/Images/Board-Selection.png"></p>

			<p>Now plug the USB cable into the Arduino to connect it to the computer.</p>
			<p class="center-image"><img src="Assets/Images/USB-Connected-Arduino.png"></p>

			<p>Again if this is your first time using Arduino, You must also set the port of the board from Tools ➔ Port.</p>
			<details>
	    	<summary class="hint">What do I do if the Port option is greyed out?</summary>
				<p>If this happens you first need to install the correct serial port driver for the device to be recognised.
					Which driver to install depends on the type of board you have:</p>
				<ul>
					<li>If you're using an official Arduino, you can configure the board to use the drivers pre-installed with Arduino IDE as shown in <a href="https://www.arduino.cc/en/Guide/DriverInstallation">this driver installation guide</a>.</li>
					<li>If you're a cheapskate like myself and you're using a clone board (an unofficial Arduino), you must instead install the driver from the board's manufacturer.
						Many clone boards commonly come with a CH340 chip, though if you're unsure you can check the inscription on the chip closest to the USB port as shown in the image below.
				 	  If this is the case then it can be installed via this <a href="https://electropeak.com/learn/how-to-install-ch340-driver/">tutorial</a>.</li>
				</ul>
				<p class="center-image"><img src="Assets/Images/Board-Chip.png" style="max-width: 600px;"></p>
			</details>
			<p class="code-image"><img src="Assets/Images/Port-Select.png"></p>

			<p>Check that the sketch compiles from Sketch ➔ Verify / Compile.</p>
			<p class="code-image"><img src="Assets/Images/Sketch-Verify.png"></p>
			<p>This will raise an error if you're missing the LedControl library.
				If this is the case, install the library and try compile the sketch again.
			</p>
			<details>
				<summary class="hint">How do I install the LedControl library?</summary>
				<p>To install it, select Sketch ➔ Include Library ➔ Manage Libraries, then search for "LedControl" and press "Install".</p>
				<p class="code-image"><img src="Assets/Images/Include-Library.png"></p>
				<p class="code-image"><img src="Assets/Images/Library-Select.png" style="max-width: 800px;"></p>
			</details>

			<p>Then upload the code to the board from Sketch ➔ Upload, or pressing Ctrl+U if using Windows or Cmd+U for Mac.</p>
			<p class="code-image"><img src="Assets/Images/Board-Upload.png"></p>

			<p>If it has worked correctly, the two LED matricies should light up and display X on each.</p>

			<h3>Technical Explaination of Code</h3>
			<p>The pre-set LED matrix eyes and alphabet are stored as binary arrays on the Arduino's memory.
				Each array is linked to a key value that represents the expression it is linked to.
				By default, the Arduino displays the X eyes when switched on as this has been set as "key1", though this can be changed at the top of the code.
			</p>
			<p>Some expressions consist of multiple frames, such as a wink, while others consist of just one with a blinking animation in-between.
				The Arduino continuously monitors for a bluetooth signal to change the expression, though while no signal is received, the current expression will run on a loop.
			</p>
		</details>

		<!-- <a name="step2" class="anchor"></a>
		<details open="open">
			<summary class="header2">Step 2 - LED Wiring</summary>
			<p>The Arduino acts as both a receiver and a controller.
				When it is sent commands from the app via the bluetooth module, the board interprets these to set the lights of the LED matricies.
			</p>
			<h3>Wiring</h3>
			<p>The first step to setting up the Arduino is to wire the LED matricies as follows.
			The wire colours don't have to match, though I recommend using black wires between the LED matrices as they may be partially visible between the eyes.
			For now do not connect the bluetooth module.
			</p>
			<p class="wiring"><img src="Assets/Images/Arduino-LED-Wiring.png"></p>
		</details> -->

		<!-- <p>and bluetooth module  I had a bluetooth module connected to the RX/TX pins.</p>
		<p class="wiring"><img src="Assets/Images/Arduino-Wiring.png"></p> -->

		<br>

		<a name="step4" class="anchor"></a>
		<details open="open">
			<summary class="header2">Step 4 - Android App</summary>
			<p>
				The Arduino can be paired to an Android device such as a phone or tablet through the bluetooth receiver.
				This grants permission to send commands to the Ardiuno to change the values to display.
				Before pairing, make sure the Arduino is switched and that the bluetooth module is wired correctly.
			</p>
			<p>
				How to pair to the Arduino will depend on what device you have, but in general this should be under Settings ➔ Bluetooth.
				If the name of the bluetooth module has not been changed, it will appear under its default name such as "HC-05".
			</p>
			<p>To download the application, visit this site on the device and click the phone icon below.
				Note you may also have to go to Setting ➔ Security and check the option "Unknown sources" for this to work.
			</p>

			<a href="https://github.com/TomMakesThings/Bluetooth-Wrench-Mask/raw/main/Android_App/bluetooth-controller-app.apk" target="_blank" rel="noopener noreferrer" download>
				<img src="Assets/Images/Dedsec-Phone.png" class="code-download" style="height: 150px;">
			</a>

			<p>Once the app is installed, open it and you should see a list of all paired devices.
				Press on the one corresponding to the name of the bluetooth module and wait for the devices to connect.
				Now you should be able to change the LEDs to different expression by clicking buttons on the screen.
			</p>

			<div class="video-container">
				<video controls>
					<source src="Assets/Videos/Phone-Demo.mov" type="video/mp4">
					Error! Could not play video as it is not supported by your browser.
				</video>
			</div>
		</details>

		<br>

		<a name="step5" class="anchor"></a>
		<details open="open">
			<summary class="header2">Step 5 - Attaching the Electronics</summary>
			<p>Now that you have tested that the code and electronics are working, the mask can be assembled.</p>
			<p>To protect the Arduino and keep the electronics away from your face, the Arduino is housed in a plastic case.
				This can be attached in place below the LEDs using the liquid nails.
			</p>
			<p>Unfortunately this means that you will have to remove the wires and wire it again in the same way to fit it into the case.</p>
		</details>

		<br>

		<a name="results" class="anchor"></a>
		<h1>Results</h1>

		<div class="video-container">
			<button class="circle-button wide-screen-button previous-button" style="float: left;" onclick="resultsVideoChanger(this)"><p><</p></button>
			<video controls id="results-video">
			  <source src="Assets/Videos/Wrench-Outfit-Pose.mp4" type="video/mp4">
			  Error! Could not play video as it is not supported by your browser.
			</video>
			<button class="circle-button wide-screen-button next-button" style="float: right;" onclick="resultsVideoChanger(this)"><p>></p></button>
		</div>
		<div class="video-buttons-small-screen">
			<button class="circle-button small-screen-button next-button" onclick="resultsVideoChanger(this)"><p><</p></button>
			<button class="circle-button small-screen-button previous-button" onclick="resultsVideoChanger(this)"><p>></p></button>
		</div>


	</div>

</div>

<br>

<div class="footer">
	<div class="footer-center">
		<a href="https://github.com/TomMakesThings">&copy; TomMakesThings 2019 - <script>document.write(new Date().getUTCFullYear());</script></a>
	</div>
</div>

<script src="Javascript/navbar.js"></script>
<script src="Javascript/video.js"></script>

</body>
</html>
